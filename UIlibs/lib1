-- RBXLibrary - UI Library para Roblox (Estilo RBXScriptz)
-- Vers√£o 2.3 - TOTALMENTE CORRIGIDA

local RBXLibrary = {}
RBXLibrary.__index = RBXLibrary

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

function RBXLibrary.new()
    local self = setmetatable({}, RBXLibrary)
    
    self.screenGui = Instance.new("ScreenGui")
    self.screenGui.Name = "RBXLibrary"
    self.screenGui.ResetOnSpawn = false
    self.screenGui.Parent = player:WaitForChild("PlayerGui")
    
    self.sidebarOpen = false
    self.activeTab = "scripts"
    self.searchQuery = ""
    self.isDragging = false
    
    self.scripts = {
        { name = "Teleport", icon = "üìç", callback = function() print("Teleport executado!") end },
        { name = "Speed Hack", icon = "‚ö°", callback = function() print("Speed Hack executado!") end },
        { name = "Jump Boost", icon = "üöÄ", callback = function() print("Jump Boost executado!") end },
        { name = "Fly", icon = "üõ∏", callback = function() print("Fly executado!") end },
        { name = "Noclip", icon = "üëª", callback = function() print("Noclip executado!") end },
        { name = "ESP", icon = "üëÅÔ∏è", callback = function() print("ESP executado!") end },
    }
    
    self:createUI()
    self:setupDrag()
    
    return self
end

function RBXLibrary:createUI()
    local screenGui = self.screenGui
    
    -- Main Container
    local mainContainer = Instance.new("Frame")
    mainContainer.Name = "MainContainer"
    mainContainer.Size = UDim2.new(0, 580, 0, 650)
    mainContainer.Position = UDim2.new(0.5, -290, 0.5, -325)
    mainContainer.BackgroundColor3 = Color3.fromRGB(15, 23, 42)
    mainContainer.BorderSizePixel = 0
    mainContainer.Parent = screenGui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 10)
    mainCorner.Parent = mainContainer
    
    self.mainContainer = mainContainer
    
    -- ===== SIDEBAR =====
    local sidebar = Instance.new("Frame")
    sidebar.Name = "Sidebar"
    sidebar.Size = UDim2.new(0, 60, 1, 0)
    sidebar.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    sidebar.BorderColor3 = Color3.fromRGB(88, 28, 135)
    sidebar.BorderSizePixel = 1
    sidebar.Parent = mainContainer
    
    -- Logo
    local logoButton = Instance.new("TextButton")
    logoButton.Name = "Logo"
    logoButton.Size = UDim2.new(1, 0, 0, 60)
    logoButton.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    logoButton.TextColor3 = Color3.fromRGB(147, 51, 234)
    logoButton.Text = "üì¶"
    logoButton.Font = Enum.Font.GothamBold
    logoButton.TextSize = 24
    logoButton.BorderColor3 = Color3.fromRGB(88, 28, 135)
    logoButton.BorderSizePixel = 1
    logoButton.AutoButtonColor = false
    logoButton.Parent = sidebar
    
    -- Sidebar Items Container
    local itemsContainer = Instance.new("Frame")
    itemsContainer.Name = "ItemsContainer"
    itemsContainer.Size = UDim2.new(1, 0, 0, 250)
    itemsContainer.Position = UDim2.new(0, 0, 0, 65)
    itemsContainer.BackgroundTransparency = 1
    itemsContainer.BorderSizePixel = 0
    itemsContainer.Parent = sidebar
    
    local itemsLayout = Instance.new("UIListLayout")
    itemsLayout.Parent = itemsContainer
    itemsLayout.SortOrder = Enum.SortOrder.LayoutOrder
    itemsLayout.Padding = UDim.new(0, 5)
    
    -- Sidebar Items
    local sidebarItems = {
        { icon = "üì¶", label = "Scripts" },
        { icon = "üë•", label = "Socials" },
        { icon = "üîß", label = "Utility" },
        { icon = "‚öôÔ∏è", label = "Settings" },
    }
    
    for i, item in ipairs(sidebarItems) do
        local itemButton = Instance.new("TextButton")
        itemButton.Name = item.label
        itemButton.Size = UDim2.new(0.8, 0, 0, 45)
        itemButton.BackgroundColor3 = (i == 1) and Color3.fromRGB(147, 51, 234) or Color3.fromRGB(30, 41, 59)
        itemButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        itemButton.Text = item.icon
        itemButton.Font = Enum.Font.GothamBold
        itemButton.TextSize = 18
        itemButton.BorderSizePixel = 0
        itemButton.AutoButtonColor = false
        itemButton.LayoutOrder = i
        itemButton.Parent = itemsContainer
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 6)
        corner.Parent = itemButton
        
        local itemIndex = i
        local itemLabel = item.label
        
        itemButton.MouseEnter:Connect(function()
            if itemIndex ~= 1 then
                itemButton.BackgroundColor3 = Color3.fromRGB(50, 30, 80)
            end
        end)
        
        itemButton.MouseLeave:Connect(function()
            if itemIndex ~= 1 then
                itemButton.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
            end
        end)
        
        itemButton.MouseButton1Click:Connect(function()
            self.activeTab = itemLabel:lower()
            for _, btn in ipairs(itemsContainer:GetChildren()) do
                if btn:IsA("TextButton") then
                    btn.BackgroundColor3 = (btn.Name == itemLabel) and Color3.fromRGB(147, 51, 234) or Color3.fromRGB(30, 41, 59)
                end
            end
            if itemLabel == "Settings" then
                self:showSettings()
            else
                self:refreshContent()
            end
        end)
    end
    
    -- Divider
    local divider = Instance.new("Frame")
    divider.Size = UDim2.new(0.8, 0, 0, 1)
    divider.Position = UDim2.new(0.1, 0, 0, 330)
    divider.BackgroundColor3 = Color3.fromRGB(88, 28, 135)
    divider.BorderSizePixel = 0
    divider.Parent = sidebar
    
    -- Bottom Section
    local bottomContainer = Instance.new("Frame")
    bottomContainer.Name = "BottomContainer"
    bottomContainer.Size = UDim2.new(1, 0, 0, 150)
    bottomContainer.Position = UDim2.new(0, 0, 1, -150)
    bottomContainer.BackgroundTransparency = 1
    bottomContainer.BorderSizePixel = 0
    bottomContainer.Parent = sidebar
    
    -- Shop Button
    local shopButton = Instance.new("TextButton")
    shopButton.Name = "Shop"
    shopButton.Size = UDim2.new(0.8, 0, 0, 45)
    shopButton.Position = UDim2.new(0.1, 0, 0, 0)
    shopButton.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    shopButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    shopButton.Text = "üõí"
    shopButton.Font = Enum.Font.GothamBold
    shopButton.TextSize = 18
    shopButton.BorderSizePixel = 0
    shopButton.AutoButtonColor = false
    shopButton.Parent = bottomContainer
    
    local shopCorner = Instance.new("UICorner")
    shopCorner.CornerRadius = UDim.new(0, 6)
    shopCorner.Parent = shopButton
    
    shopButton.MouseEnter:Connect(function()
        shopButton.BackgroundColor3 = Color3.fromRGB(50, 30, 80)
    end)
    
    shopButton.MouseLeave:Connect(function()
        shopButton.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    end)
    
    -- Profile Button
    local profileButton = Instance.new("TextButton")
    profileButton.Name = "Profile"
    profileButton.Size = UDim2.new(0.8, 0, 0, 50)
    profileButton.Position = UDim2.new(0.1, 0, 0, 50)
    profileButton.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    profileButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    profileButton.Text = "U"
    profileButton.Font = Enum.Font.GothamBold
    profileButton.TextSize = 20
    profileButton.BorderSizePixel = 0
    profileButton.AutoButtonColor = false
    profileButton.Parent = bottomContainer
    
    local profileCorner = Instance.new("UICorner")
    profileCorner.CornerRadius = UDim.new(0, 6)
    profileCorner.Parent = profileButton
    
    local userId = player.UserId
    pcall(function()
        profileButton.BackgroundImage = "rbxthumb://type=AvatarHeadShot&id=" .. userId .. "&w=150&h=150"
        profileButton.Text = ""
    end)
    
    profileButton.MouseEnter:Connect(function()
        profileButton.BackgroundColor3 = Color3.fromRGB(50, 30, 80)
    end)
    
    profileButton.MouseLeave:Connect(function()
        profileButton.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    end)
    
    -- ===== MAIN CONTENT =====
    local contentContainer = Instance.new("Frame")
    contentContainer.Name = "ContentContainer"
    contentContainer.Size = UDim2.new(1, -60, 1, 0)
    contentContainer.Position = UDim2.new(0, 60, 0, 0)
    contentContainer.BackgroundColor3 = Color3.fromRGB(15, 23, 42)
    contentContainer.BorderSizePixel = 0
    contentContainer.Parent = mainContainer
    
    self.contentContainer = contentContainer
    
    -- Header
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, 0, 0, 90)
    header.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    header.BorderColor3 = Color3.fromRGB(88, 28, 135)
    header.BorderSizePixel = 1
    header.Parent = contentContainer
    
    self.header = header
    
    -- Search Bar
    local searchContainer = Instance.new("Frame")
    searchContainer.Name = "SearchContainer"
    searchContainer.Size = UDim2.new(0, 250, 0, 35)
    searchContainer.Position = UDim2.new(0, 10, 0, 8)
    searchContainer.BackgroundColor3 = Color3.fromRGB(15, 23, 42)
    searchContainer.BorderColor3 = Color3.fromRGB(88, 28, 135)
    searchContainer.BorderSizePixel = 1
    searchContainer.Parent = header
    
    local searchCorner = Instance.new("UICorner")
    searchCorner.CornerRadius = UDim.new(0, 6)
    searchCorner.Parent = searchContainer
    
    local searchBox = Instance.new("TextBox")
    searchBox.Name = "SearchBox"
    searchBox.Size = UDim2.new(1, -30, 1, 0)
    searchBox.Position = UDim2.new(0, 25, 0, 0)
    searchBox.BackgroundTransparency = 1
    searchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    searchBox.PlaceholderText = "Search..."
    searchBox.PlaceholderColor3 = Color3.fromRGB(107, 114, 128)
    searchBox.TextSize = 12
    searchBox.Font = Enum.Font.Gotham
    searchBox.BorderSizePixel = 0
    searchBox.Parent = searchContainer
    
    searchBox.Changed:Connect(function()
        self.searchQuery = searchBox.Text:lower()
        self:refreshContent()
    end)
    
    -- Auto Execute Button
    local autoExecButton = Instance.new("TextButton")
    autoExecButton.Name = "AutoExecute"
    autoExecButton.Size = UDim2.new(0, 120, 0, 35)
    autoExecButton.Position = UDim2.new(0, 270, 0, 8)
    autoExecButton.BackgroundColor3 = Color3.fromRGB(147, 51, 234)
    autoExecButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    autoExecButton.Text = "‚ö° Auto"
    autoExecButton.Font = Enum.Font.GothamBold
    autoExecButton.TextSize = 11
    autoExecButton.BorderSizePixel = 0
    autoExecButton.AutoButtonColor = false
    autoExecButton.Parent = header
    
    local autoExecCorner = Instance.new("UICorner")
    autoExecCorner.CornerRadius = UDim.new(0, 6)
    autoExecCorner.Parent = autoExecButton
    
    autoExecButton.MouseEnter:Connect(function()
        autoExecButton.BackgroundColor3 = Color3.fromRGB(168, 85, 247)
    end)
    
    autoExecButton.MouseLeave:Connect(function()
        autoExecButton.BackgroundColor3 = Color3.fromRGB(147, 51, 234)
    end)
    
    -- Favorite Button
    local favButton = Instance.new("TextButton")
    favButton.Name = "Favorite"
    favButton.Size = UDim2.new(0, 35, 0, 35)
    favButton.Position = UDim2.new(0, 400, 0, 8)
    favButton.BackgroundColor3 = Color3.fromRGB(50, 50, 80)
    favButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    favButton.Text = "‚≠ê"
    favButton.Font = Enum.Font.GothamBold
    favButton.TextSize = 14
    favButton.BorderColor3 = Color3.fromRGB(88, 28, 135)
    favButton.BorderSizePixel = 1
    favButton.AutoButtonColor = false
    favButton.Parent = header
    
    local favCorner = Instance.new("UICorner")
    favCorner.CornerRadius = UDim.new(0, 6)
    favCorner.Parent = favButton
    
    favButton.MouseEnter:Connect(function()
        favButton.BackgroundColor3 = Color3.fromRGB(70, 50, 100)
    end)
    
    favButton.MouseLeave:Connect(function()
        favButton.BackgroundColor3 = Color3.fromRGB(50, 50, 80)
    end)
    
    -- Tabs
    local tabsContainer = Instance.new("Frame")
    tabsContainer.Name = "TabsContainer"
    tabsContainer.Size = UDim2.new(1, 0, 0, 35)
    tabsContainer.Position = UDim2.new(0, 0, 0, 50)
    tabsContainer.BackgroundTransparency = 1
    tabsContainer.BorderSizePixel = 0
    tabsContainer.Parent = header
    
    local tabs = { "Scripts", "Socials", "Utility" }
    
    for i, tabName in ipairs(tabs) do
        local tabButton = Instance.new("TextButton")
        tabButton.Name = tabName
        tabButton.Size = UDim2.new(0, 100, 0, 30)
        tabButton.Position = UDim2.new(0, (i - 1) * 105, 0, 0)
        tabButton.BackgroundTransparency = 1
        tabButton.TextColor3 = (i == 1) and Color3.fromRGB(147, 51, 234) or Color3.fromRGB(107, 114, 128)
        tabButton.Text = tabName
        tabButton.Font = Enum.Font.GothamBold
        tabButton.TextSize = 12
        tabButton.BorderSizePixel = 0
        tabButton.AutoButtonColor = false
        tabButton.Parent = tabsContainer
        
        if i == 1 then
            local underline = Instance.new("Frame")
            underline.Name = "Underline"
            underline.Size = UDim2.new(0.7, 0, 0, 2)
            underline.Position = UDim2.new(0.15, 0, 1, -2)
            underline.BackgroundColor3 = Color3.fromRGB(147, 51, 234)
            underline.BorderSizePixel = 0
            underline.Parent = tabButton
        end
        
        local tabButtonIndex = i
        local tabButtonName = tabName
        
        tabButton.MouseButton1Click:Connect(function()
            self.activeTab = tabButtonName:lower()
            
            for _, btn in ipairs(tabsContainer:GetChildren()) do
                if btn:IsA("TextButton") then
                    btn.TextColor3 = Color3.fromRGB(107, 114, 128)
                    if btn:FindFirstChild("Underline") then
                        btn:FindFirstChild("Underline"):Destroy()
                    end
                end
            end
            
            tabButton.TextColor3 = Color3.fromRGB(147, 51, 234)
            local underline = Instance.new("Frame")
            underline.Name = "Underline"
            underline.Size = UDim2.new(0.7, 0, 0, 2)
            underline.Position = UDim2.new(0.15, 0, 1, -2)
            underline.BackgroundColor3 = Color3.fromRGB(147, 51, 234)
            underline.BorderSizePixel = 0
            underline.Parent = tabButton
            
            self:refreshContent()
        end)
    end
    
    -- Content Scroll
    local contentScroll = Instance.new("ScrollingFrame")
    contentScroll.Name = "ContentScroll"
    contentScroll.Size = UDim2.new(1, 0, 1, -90)
    contentScroll.Position = UDim2.new(0, 0, 0, 90)
    contentScroll.BackgroundTransparency = 1
    contentScroll.BorderSizePixel = 0
    contentScroll.ScrollBarThickness = 6
    contentScroll.ScrollBarImageColor3 = Color3.fromRGB(147, 51, 234)
    contentScroll.Parent = contentContainer
    
    local gridLayout = Instance.new("UIGridLayout")
    gridLayout.Parent = contentScroll
    gridLayout.CellSize = UDim2.new(0, 140, 0, 140)
    gridLayout.CellPadding = UDim2.new(0, 12, 0, 12)
    gridLayout.SortOrder = Enum.SortOrder.LayoutOrder
    gridLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
    gridLayout.VerticalAlignment = Enum.VerticalAlignment.Top
    
    local padding = Instance.new("UIPadding")
    padding.Parent = contentScroll
    padding.PaddingTop = UDim.new(0, 12)
    padding.PaddingLeft = UDim.new(0, 12)
    padding.PaddingRight = UDim.new(0, 12)
    padding.PaddingBottom = UDim.new(0, 12)
    
    self.contentScroll = contentScroll
    self:refreshContent()
end

function RBXLibrary:refreshContent()
    local scroll = self.contentScroll
    
    for _, child in ipairs(scroll:GetChildren()) do
        if child:IsA("Frame") and child.Name == "ScriptCard" then
            child:Destroy()
        end
    end
    
    for _, script in ipairs(self.scripts) do
        if script.name:lower():find(self.searchQuery) or self.searchQuery == "" then
            local scriptCard = Instance.new("Frame")
            scriptCard.Name = "ScriptCard"
            scriptCard.Size = UDim2.new(0, 140, 0, 140)
            scriptCard.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
            scriptCard.BorderColor3 = Color3.fromRGB(34, 211, 238)
            scriptCard.BorderSizePixel = 2
            scriptCard.Parent = scroll
            
            local corner = Instance.new("UICorner")
            corner.CornerRadius = UDim.new(0, 6)
            corner.Parent = scriptCard
            
            local iconLabel = Instance.new("TextLabel")
            iconLabel.Name = "Icon"
            iconLabel.Size = UDim2.new(1, 0, 0, 50)
            iconLabel.Position = UDim2.new(0, 0, 0, 10)
            iconLabel.BackgroundTransparency = 1
            iconLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            iconLabel.Text = script.icon
            iconLabel.Font = Enum.Font.GothamBold
            iconLabel.TextSize = 28
            iconLabel.BorderSizePixel = 0
            iconLabel.Parent = scriptCard
            
            local nameLabel = Instance.new("TextLabel")
            nameLabel.Name = "Name"
            nameLabel.Size = UDim2.new(1, -4, 0, 25)
            nameLabel.Position = UDim2.new(0, 2, 0, 55)
            nameLabel.BackgroundTransparency = 1
            nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            nameLabel.Text = script.name
            nameLabel.Font = Enum.Font.GothamBold
            nameLabel.TextSize = 11
            nameLabel.TextWrapped = true
            nameLabel.BorderSizePixel = 0
            nameLabel.Parent = scriptCard
            
            local playButton = Instance.new("TextButton")
            playButton.Name = "PlayButton"
            playButton.Size = UDim2.new(0.8, 0, 0, 25)
            playButton.Position = UDim2.new(0.1, 0, 1, -28)
            playButton.BackgroundColor3 = Color3.fromRGB(147, 51, 234)
            playButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            playButton.Text = "‚ñ∂ Play"
            playButton.Font = Enum.Font.GothamBold
            playButton.TextSize = 10
            playButton.BorderSizePixel = 0
            playButton.AutoButtonColor = false
            playButton.Parent = scriptCard
            
            local playCorner = Instance.new("UICorner")
            playCorner.CornerRadius = UDim.new(0, 4)
            playCorner.Parent = playButton
            
            local scriptCallback = script.callback
            
            playButton.MouseEnter:Connect(function()
                playButton.BackgroundColor3 = Color3.fromRGB(168, 85, 247)
            end)
            
            playButton.MouseLeave:Connect(function()
                playButton.BackgroundColor3 = Color3.fromRGB(147, 51, 234)
            end)
            
            playButton.MouseButton1Click:Connect(function()
                if scriptCallback then
                    scriptCallback()
                end
            end)
            
            scriptCard.MouseEnter:Connect(function()
                scriptCard.BorderColor3 = Color3.fromRGB(52, 211, 153)
            end)
            
            scriptCard.MouseLeave:Connect(function()
                scriptCard.BorderColor3 = Color3.fromRGB(34, 211, 238)
            end)
        end
    end
end

function RBXLibrary:showSettings()
    if self.settingsFrame then
        self.settingsFrame:Destroy()
        self.settingsFrame = nil
        return
    end
    
    self.settingsFrame = Instance.new("Frame")
    self.settingsFrame.Name = "SettingsFrame"
    self.settingsFrame.Size = UDim2.new(1, 0, 1, -90)
    self.settingsFrame.Position = UDim2.new(0, 0, 0, 90)
    self.settingsFrame.BackgroundColor3 = Color3.fromRGB(15, 23, 42)
    self.settingsFrame.BorderSizePixel = 0
    self.settingsFrame.Parent = self.contentContainer
    
    local avatarFrame = Instance.new("Frame")
    avatarFrame.Name = "AvatarFrame"
    avatarFrame.Size = UDim2.new(0, 80, 0, 80)
    avatarFrame.Position = UDim2.new(0.5, -40, 0, 20)
    avatarFrame.BackgroundColor3 = Color3.fromRGB(30, 41, 59)
    avatarFrame.BorderColor3 = Color3.fromRGB(147, 51, 234)
    avatarFrame.BorderSizePixel = 2
    avatarFrame.Parent = self.settingsFrame
    
    local avatarCorner = Instance.new("UICorner")
    avatarCorner.CornerRadius = UDim.new(0, 8)
    avatarCorner.Parent = avatarFrame
    
    local avatarImage = Instance.new("ImageLabel")
    avatarImage.Name = "AvatarImage"
    avatarImage.Size = UDim2.new(1, 0, 1, 0)
    avatarImage.BackgroundTransparency = 1
    avatarImage.Parent = avatarFrame
    
    pcall(function()
        avatarImage.Image = "rbxthumb://type=AvatarHeadShot&id=" .. player.UserId .. "&w=150&h=150"
    end)
    
    local usernameLabel = Instance.new("TextLabel")
    usernameLabel.Name = "UsernameLabel"
    usernameLabel.Size = UDim2.new(1, 0, 0, 30)
    usernameLabel.Position = UDim2.new(0, 0, 0, 110)
    usernameLabel.BackgroundTransparency = 1
    usernameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    usernameLabel.Text = "Player: " .. player.Name
    usernameLabel.Font = Enum.Font.GothamBold
    usernameLabel.TextSize = 14
    usernameLabel.BorderSizePixel = 0
    usernameLabel.Parent = self.settingsFrame
    
    local userIdLabel = Instance.new("TextLabel")
    userIdLabel.Name = "UserIdLabel"
    userIdLabel.Size = UDim2.new(1, 0, 0, 25)
    userIdLabel.Position = UDim2.new(0, 0, 0, 145)
    userIdLabel.BackgroundTransparency = 1
    userIdLabel.TextColor3 = Color3.fromRGB(148, 163, 184)
    userIdLabel.Text = "ID: " .. tostring(player.UserId)
    userIdLabel.Font = Enum.Font.Gotham
    userIdLabel.TextSize = 12
    userIdLabel.BorderSizePixel = 0
    userIdLabel.Parent = self.settingsFrame
    
    local divider = Instance.new("Frame")
    divider.Size = UDim2.new(0.8, 0, 0, 1)
    divider.Position = UDim2.new(0.1, 0, 0, 185)
    divider.BackgroundColor3 = Color3.fromRGB(88, 28, 135)
    divider.BorderSizePixel = 0
    divider.Parent = self.settingsFrame
    
    local settingsLabel = Instance.new("TextLabel")
    settingsLabel.Name = "SettingsLabel"
    settingsLabel.Size = UDim2.new(1, 0, 0, 30)
    settingsLabel.Position = UDim2.new(0, 20, 0, 200)
    settingsLabel.BackgroundTransparency = 1
    settingsLabel.TextColor3 = Color3.fromRGB(147, 51, 234)
    settingsLabel.Text = "‚öôÔ∏è Settings"
    settingsLabel.Font = Enum.Font.GothamBold
    settingsLabel.TextSize = 13
    settingsLabel.BorderSizePixel = 0
    settingsLabel.TextXAlignment = Enum.TextXAlignment.Left
    settingsLabel.Parent = self.settingsFrame
end

function RBXLibrary:setupDrag()
    local mainContainer = self.mainContainer
    local header = self.header
    
    local dragStart
    local startPos
    
    header.InputBegan:Connect(function(input, gameProcessed)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragStart = input.Position
            startPos = mainContainer.Position
            self.isDragging = true
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input, gameProcessed)
        if self.isDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            if dragStart then
                local delta = input.Position - dragStart
                mainContainer.Position = startPos + UDim2.new(0, delta.X, 0, delta.Y)
            end
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input, gameProcessed)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            self.isDragging = false
        end
    end)
end

function RBXLibrary:addScript(name, icon, callback)
    table.insert(self.scripts, {
        name = name,
        icon = icon,
        callback = callback
    })
    self:refreshContent()
end

function RBXLibrary:removeScript(index)
    table.remove(self.scripts, index)
    self:refreshContent()
end

return RBXLibrary
